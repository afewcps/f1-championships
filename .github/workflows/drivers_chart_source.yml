name: F1 Constructors Championship Chart Source

on:
  schedule:
    # Australian Grand Prix
    - cron: "0 6-23 16 3 *"  # Sonntag 16.03.
    # Chinese Grand Prix
    - cron: "0 6-23 23 3 *"
    # Japanese Grand Prix
    - cron: "0 6-23 6 4 *"
    # Bahrain Grand Prix
    - cron: "0 6-23 13 4 *"
    # Saudi Arabian Grand Prix
    - cron: "0 6-23 20 4 *"
    # Miami Grand Prix
    - cron: "0 6-23 4 5 *"
    # Emilia Romagna Grand Prix
    - cron: "30 19 18 5 *"
    # Monaco Grand Prix
    - cron: "30 19 25 5 *"
    # Spanish Grand Prix
    - cron: "30 19 1 6 *"
    # Canadian Grand Prix
    - cron: "0 6-23 15 6 *"
    # Austrian Grand Prix
    - cron: "30 19 29 6 *"
    # British Grand Prix
    - cron: "30 20 6 7 *"
    # Belgian Grand Prix
    - cron: "30 19 27 7 *"
    # Hungarian Grand Prix
    - cron: "30 19 3 8 *"
    # Dutch Grand Prix
    - cron: "30 19 31 8 *"
    # Italian Grand Prix
    - cron: "30 19 7 9 *"
    # Azerbaijan Grand Prix
    - cron: "30 17 21 9 *"
    # Singapore Grand Prix
    - cron: "30 18 5 10 *"
    # United States Grand Prix
    - cron: "30 22 18 10 *"
    - cron: "30 1 20 10 *"
    # Mexican Grand Prix
    - cron: "30 1 27 10 *"
    # Brazilian Grand Prix
    - cron: "30 18 8 1 *"
    - cron: "30 22 9 11 *"
    # Las Vegas Grand Prix
    - cron: "30 9 22 11 *"
    # Qatar Grand Prix
    - cron: "30 18 29 11 *"
    - cron: "30 21 30 11 *"
    # Abu Dhabi Grand Prix
    - cron: "30 18 7 12 *"
  workflow_dispatch:

jobs:
  sync-chart-data:
    runs-on: ubuntu-latest
    steps:
    - uses: actions/checkout@v4
    - name: Set up Python
      uses: actions/setup-python@v4
      with:
        python-version: '3.9'
    - name: Install dependencies
      run: |
        pip install requests urllib3
    - name: Sync F1 Chart Data
      env:
        NOTION_TOKEN: ${{ secrets.NOTION_TOKEN }}
      run: |
        echo "üìä Syncing Chart Data..."
        python f1_drivers_chart_source_ACTIONS.py
    - name: Log completion
      if: success()
      run: echo "‚úÖ Chart data synced at $(date)"
    - name: Log failure
      if: failure()
      run: echo "‚ùå Drivers Championship update failed at $(date)"
           exit 1
